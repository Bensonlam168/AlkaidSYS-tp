# Example environment configuration for AlkaidSYS-tp
# 请根据实际环境复制为 .env 并调整各项配置

# JWT issuer (iss) 配置
# 必须使用完整域名 / URL，建议按环境区分：
# - 开发：https://api.alkaidsys.local
# - 测试：https://api.test.alkaidsys.com
# - 生产：https://api.alkaidsys.com
JWT_ISSUER=https://api.alkaidsys.local
# JWT secret key 配置（T1-JWT-ENV）
# 开发环境可使用本地随机值；生产环境必须通过安全渠道配置为强随机密钥
JWT_SECRET=CHANGE_THIS_IN_PRODUCTION



# Cache & Redis configuration (T1-CACHE-REDIS)
# 缓存驱动：
# - 生产类环境（APP_ENV=production/prod/stage/staging）强制使用 redis
# - 非生产环境可选择 file 或 redis（默认 file）
CACHE_DRIVER=file

# Redis 连接配置
# - 本地 Docker 开发：推荐 REDIS_HOST=redis（与 docker-compose.yml 中 backend 的服务名保持一致）
# - 本地直连外部 Redis / 测试 / 生产：将 REDIS_HOST 改为外部 Redis 地址，例如：
#   - REDIS_HOST=your-redis.internal.example.com
#   - REDIS_PORT=6379
#   - REDIS_PASSWORD=your_strong_password（如启用密码）
#   - REDIS_DB=0
# 提示：
# - config/cache.php 会读取这些变量配置 `redis` 缓存 store；
# - config/session.php 会通过 cache+redis 复用同一连接；
# - 启动期 RedisHealthCheckService 会使用 Cache::store('redis') 做一次读写自检。
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Runtime DDL guard for SchemaBuilder (T1-DDL-GUARD)
# 允许运行时 DDL 的环境白名单（逗号分隔，不区分大小写），默认：dev,local,testing
SCHEMA_RUNTIME_DDL_ALLOWED_ENVS=dev,local,testing
# 是否在允许的环境中放行运行时 DDL（默认 false，需显式开启）
ALLOW_RUNTIME_DDL=false

# CORS (Cross-Origin Resource Sharing) Configuration
# CORS 跨域资源共享配置
#
# 允许的源（Origin）列表，逗号分隔，用于控制哪些前端域名可以访问 API
# Allowed origins (comma-separated) to control which frontend domains can access the API
#
# 开发环境示例（允许所有本地开发服务器）：
# Development example (allow all local dev servers):
# CORS_ALLOWED_ORIGINS=http://localhost:5666,http://localhost:5173,http://localhost:5555,http://localhost:5556,http://localhost:5557
#
# 测试环境示例（允许测试域名）：
# Staging example (allow staging domains):
# CORS_ALLOWED_ORIGINS=https://app.test.alkaidsys.com,https://admin.test.alkaidsys.com
#
# 生产环境示例（仅允许生产域名）：
# Production example (only allow production domains):
# CORS_ALLOWED_ORIGINS=https://app.alkaidsys.com,https://admin.alkaidsys.com
#
# ⚠️ 安全提示 / Security Notes:
# 1. 生产环境必须明确配置允许的域名，禁止留空或使用通配符 *
#    Production MUST explicitly configure allowed domains, DO NOT leave empty or use wildcard *
# 2. 如果留空，开发环境会使用默认的 localhost 端口列表
#    If empty, development environment will use default localhost ports
# 3. 生产环境如果留空，CORS 中间件会记录警告日志
#    If empty in production, CORS middleware will log warnings
#
# 默认值（开发环境）/ Default (development):
CORS_ALLOWED_ORIGINS=

# Casbin 授权引擎配置
# Casbin Authorization Engine Configuration
#
# Casbin 是一个强大的访问控制库，支持 RBAC、ABAC、ACL 等多种模型。
# Casbin is a powerful access control library supporting RBAC, ABAC, ACL and more.
#
# @see https://casbin.org/
# @see https://github.com/php-casbin/php-casbin

# 是否启用 Casbin 授权引擎
# Whether to enable Casbin authorization engine
# - true: 启用 Casbin（Phase 2）
# - false: 使用数据库 RBAC（Phase 1，默认）
CASBIN_ENABLED=false

# Casbin 运行模式
# Casbin running mode
# - DB_ONLY: 仅使用数据库 RBAC（Phase 1，默认）
# - CASBIN_ONLY: 仅使用 Casbin（Phase 2 目标）
# - DUAL_MODE: 双模式运行，对比验证（过渡期）
CASBIN_MODE=DB_ONLY

# 是否启用 Casbin 日志
# Whether to enable Casbin logging
# - true: 启用日志（开发环境推荐）
# - false: 禁用日志（生产环境推荐，默认）
CASBIN_LOG_ENABLED=false

# 是否启用 Casbin 缓存
# Whether to enable Casbin cache
# - true: 启用缓存（生产环境推荐，默认）
# - false: 禁用缓存（开发环境可选）
CASBIN_CACHE_ENABLED=true

# Casbin 缓存过期时间（秒）
# Casbin cache TTL (seconds)
# 默认：3600（1 小时）
CASBIN_CACHE_TTL=3600

# Casbin 策略刷新间隔（秒）
# Casbin policy reload interval (seconds)
# 默认：300（5 分钟）
# 设置为 0 表示不自动刷新，需要手动调用刷新 API
CASBIN_RELOAD_TTL=300
